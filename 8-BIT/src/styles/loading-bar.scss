// Loading bar

.loading-bar {
  // Scale everything up 10x to emphasize pixelation
  transform: scale(3);
  transform-origin: middle left;
  image-rendering: pixelated;
  text-align: center;

  &__text {
    font-size: $font-size-xxs; // Small font, becomes large when scaled
    font-family: $font-pixel-condensed;
  }

  &__extra {
    font-size: $font-size-xxxs;
    font-family: $font-pixel-condensed;
  }

  // Wrapper that holds the masked shape
  &__wrapper {
    position: relative;
    width: 16px; // very low-res width
    height: 8px; // very low-res height
    background: $bar-background;
    // Apply the mask to create the pixel-rounded shape
    mask-image: url("data:image/svg+xml,%3Csvg width='16' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='2' y='0' width='12' height='1' fill='white'/%3E%3Crect x='1' y='1' width='14' height='1' fill='white'/%3E%3Crect x='0' y='2' width='16' height='1' fill='white'/%3E%3Crect x='0' y='3' width='16' height='1' fill='white'/%3E%3Crect x='0' y='4' width='16' height='1' fill='white'/%3E%3Crect x='0' y='5' width='16' height='1' fill='white'/%3E%3Crect x='1' y='6' width='14' height='1' fill='white'/%3E%3Crect x='2' y='7' width='12' height='1' fill='white'/%3E%3C/svg%3E");
    mask-size: cover;
    mask-repeat: no-repeat;
    mask-position: center;
    image-rendering: pixelated; // Ensure mask remains pixel-crisp
    overflow: hidden;
  }

  &__progress {
    position: absolute;
    top: 100%;
    left: 0;
    height: 0.2rem;
    margin-top: 5px;
    width: 0%;
    background: linear-gradient(
      to right,
      $color-gradient-start,
      $color-gradient-end
    );
    transition: width 0.1s steps(1); // step transitions feel more retro
  }
}
